"use strict";const e=require("vue"),a=require("./classes-CXBJXuVd.js"),l=require("./useAlignment-BTUJZ_9x.js"),t=require("./useDefaults-Bq2idhQU.js"),s=require("./constants-B1zBgSOo.js"),u=require("./event-UQ02889E.js"),o=require("./dom-D5l3V401.js"),i=require("./index-BqHkgtNq.js"),n=["aria-disabled","aria-label"],d=e.defineComponent({__name:"BPagination",props:e.mergeModels({align:{default:"start"},ariaControls:{default:void 0},ariaLabel:{default:"Pagination"},disabled:{type:Boolean,default:!1},ellipsisClass:{default:void 0},ellipsisText:{default:"…"},firstClass:{default:void 0},firstNumber:{type:Boolean,default:!1},firstText:{default:"«"},noEllipsis:{type:Boolean,default:!1},noGotoEndButtons:{type:Boolean,default:!1},labelFirstPage:{default:"Go to first page"},labelLastPage:{default:"Go to last page"},labelNextPage:{default:"Go to next page"},labelPage:{default:"Go to page"},labelPrevPage:{default:"Go to previous page"},lastClass:{default:void 0},lastNumber:{type:Boolean,default:!1},lastText:{default:"»"},limit:{default:5},nextClass:{default:void 0},nextText:{default:"›"},pageClass:{default:void 0},perPage:{default:20},pills:{type:Boolean,default:!1},prevClass:{default:void 0},prevText:{default:"‹"},size:{default:void 0},totalRows:{default:0}},{modelValue:{default:1},modelModifiers:{}}),emits:e.mergeModels(["page-click"],["update:modelValue"]),setup(d,{emit:r}){const v=-2,c=-3,p=d,m=t.useDefaults(p,"BPagination"),f=r,g=e.useModel(d,"modelValue"),b=e.useTemplateRef("_pageElements"),x=i.useToNumber((()=>m.limit),{nanToZero:!0,method:"parseInt"}),h=i.useToNumber((()=>m.perPage),{nanToZero:!0,method:"parseInt"}),T=i.useToNumber((()=>m.totalRows),{nanToZero:!0,method:"parseInt"}),P=i.useToNumber(g,{nanToZero:!0,method:"parseInt"}),k=e.computed((()=>Math.max(h.value||20,1))),N=e.computed((()=>Math.max(T.value||0,0))),C=e.computed((()=>Math.ceil(N.value/k.value))),E=e.computed((()=>"fill"===m.align)),B=e.computed((()=>"fill"===m.align?"start":m.align)),V=l.useAlignment(B),y=e=>e===P.value,_=e=>m.disabled||y(e)||P.value<1||e<1||e>C.value,w=e.computed((()=>_(1))),M=e.computed((()=>_(P.value-1))),O=e.computed((()=>_(C.value))),D=e.computed((()=>_(P.value+1))),A=({page:e,classVal:a,disabled:l,slotName:t,textValue:s,tabIndex:u,label:o,position:i,isActive:n,role:d,hidden:r,isSmHidden:v})=>({li:{class:["page-item",{active:n,disabled:l,"bv-d-sm-down-none":v,"flex-fill":E.value,"d-flex":E.value&&!l},a],role:d,"aria-hidden":r},button:{is:l?"span":"button",class:["page-link","text-center",{"flex-grow-1":!l&&E.value}],"aria-label":o,"aria-controls":m.ariaControls||void 0,"aria-disabled":!!l||void 0,"aria-posinset":i,"aria-setsize":i?C.value:void 0,role:"menuitem",type:l?void 0:"button",tabindex:l?void 0:u},text:{name:t,active:n,value:s??e,page:e,disabled:l,index:e-1,content:s?void 0:e},clickHandler:a=>H(a,e)}),G=({page:e,classVal:a,disabled:l,slotName:t,textValue:s,label:u})=>A({page:e,classVal:a,disabled:l,slotName:t,textValue:s,label:u,tabIndex:"-1"}),L=(e,a)=>{return A({page:e,disabled:m.disabled,classVal:m.pageClass,slotName:"page",label:m.labelPage?`${m.labelPage} ${e}`:void 0,tabIndex:(l=e,(m.disabled?null:y(l)?"0":"-1")??void 0),position:e,isActive:y(e),isSmHidden:a});var l},S=e.computed((()=>G({page:1,disabled:w.value,classVal:m.firstClass,slotName:"first-text",textValue:m.firstText,label:m.labelFirstPage}))),q=e.computed((()=>G({page:Math.max(P.value-1,1),disabled:M.value,classVal:m.prevClass,slotName:"prev-text",textValue:m.prevText,label:m.labelPrevPage}))),z=e.computed((()=>G({page:Math.min(P.value+1,C.value),disabled:D.value,classVal:m.nextClass,slotName:"next-text",textValue:m.nextText,label:m.labelNextPage}))),I=e.computed((()=>G({page:C.value,disabled:O.value,classVal:m.lastClass,slotName:"last-text",textValue:m.lastText,label:m.labelLastPage}))),R=e.computed((()=>({li:{class:["page-item","disabled","text-center","bv-d-sm-down-none",E.value?"flex-fill":"",m.ellipsisClass],role:"separator"},span:{class:["page-link"]}}))),j=e.computed((()=>[V.value,{[`pagination-${m.size}`]:void 0!==m.size,"b-pagination-pills":m.pills}])),$=e.computed((()=>({pageSize:k.value,totalRows:T.value,numberOfPages:C.value}))),H=(e,l)=>{if(l===P.value)return;const t=new a.BvEvent("page-click",{cancelable:!0,target:e.target});f("page-click",t,l),t.defaultPrevented||(g.value=l)},F=e=>{const a=!(!e||e.nodeType!==Node.ELEMENT_NODE),l=a?e.hasAttribute("disabled"):null,t=!(!a||!e.classList)&&e.classList.contains("disabled");return!a||e.disabled||l||t},Z=()=>{var e;return(null==(e=b.value)?void 0:e.map((e=>e.children[0])).filter((e=>{if("none"===e.getAttribute("display"))return!1;const a=e.getBoundingClientRect();return!!(a&&a.height>0&&a.width>0)})))??[]},K=a=>{const{code:l,shiftKey:t}=a;l===s.CODE_LEFT||l===s.CODE_UP?(u.stopEvent(a),t?e.nextTick((()=>{const e=Z().find((e=>!F(e)));null==e||e.focus()})):e.nextTick((()=>{var e;const a=Z(),l=a.indexOf(o.getActiveElement());l>0&&!F(a[l-1])&&(null==(e=a[l-1])||e.focus())}))):l!==s.CODE_RIGHT&&l!==s.CODE_DOWN||(u.stopEvent(a),t?e.nextTick((()=>{const e=Z().reverse().find((e=>!F(e)));null==e||e.focus()})):e.nextTick((()=>{var e;const a=Z(),l=a.indexOf(o.getActiveElement());l<a.length-1&&!F(a[l+1])&&(null==(e=a[l+1])||e.focus())})))};e.watch(P,(e=>{const a=((e,a)=>{const l=e||1;return l>a?a:l<1?1:l})(e,C.value);a!==g.value&&(g.value=a)})),e.watch($,((e,a)=>{(a.pageSize!==e.pageSize&&a.totalRows===e.totalRows||a.numberOfPages!==e.numberOfPages&&P.value>a.numberOfPages)&&(g.value=1)}));const U=e.computed((()=>m.noGotoEndButtons&&!m.firstNumber?1:0)),W=e.computed((()=>m.noGotoEndButtons&&!m.lastNumber?1:0)),J=e.computed((()=>U.value?0:1)),Q=e.computed((()=>W.value?0:1)),X=e.computed((()=>m.firstNumber?1:0)),Y=e.computed((()=>m.lastNumber?1:0)),ee=e.computed((()=>Math.floor(x.value/2))),ae=e.computed((()=>{const{value:e}=P,a=le.value.map((e=>{switch(e){case-1:return{id:e,...S.value};case v:return{id:e,...q.value};case c:return{id:e,...z.value};case-4:return{id:e,...I.value};case-5:case-6:return{id:e,...R.value};default:return{id:e,...L(e)}}}));if(C.value>3){if(e>C.value-ee.value-Y.value){const e=2+J.value;a[e]={id:a[e].id,...L(a[e].id,!0)}}if(e<=ee.value+X.value){const e=a.length-(3+Q.value);a[e]={id:a[e].id,...L(a[e].id,!0)}}}return a})),le=e.computed((()=>{const e=C.value,{value:a}=P,l=x.value,t=m.noEllipsis||l<=3;if(e<l+X.value+Y.value)return[X.value||U.value?null:-1,v,...Array.from({length:e},((e,a)=>a+1)),c,Y.value||W.value?null:-4].filter((e=>null!==e));const s=Array.from({length:l+4-(U.value+W.value)});if(U.value?s[0]=v:X.value?(s[0]=v,s[1]=1):(s[0]=-1,s[1]=v),W.value?s[s.length-1]=c:Y.value?(s[s.length-1]=c,s[s.length-2]=e):(s[s.length-1]=-4,s[s.length-2]=c),a<=ee.value+X.value){for(let e=1;e<=l;e++)s[e+1-U.value]=e+X.value;t||(s[s.length-(2+Q.value)]=-6)}if(a>e-ee.value-Y.value){const a=e-(l-1)-Y.value;for(let e=0;e<l;e++)s[e+2-U.value]=a+e;t||(s[1+J.value]=-5)}if(!s[2]){const e=a-Math.floor(l/2);for(let a=0;a<l;a++)s[a+2-U.value]=e+a;t||(s[1+J.value]=-5,s[s.length-(2+Q.value)]=-6)}return s.filter((e=>null!==e))}));return(a,l)=>(e.openBlock(),e.createElementBlock("ul",{class:e.normalizeClass(["pagination",j.value]),role:"menubar","aria-disabled":e.unref(m).disabled,"aria-label":e.unref(m).ariaLabel||void 0,onKeydown:K},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ae.value,(l=>(e.openBlock(),e.createElementBlock("li",e.mergeProps({key:`page-${l.id}`,ref_for:!0},l.li,{ref_for:!0,ref:"_pageElements"}),[-5===l.id||-6===l.id?(e.openBlock(),e.createElementBlock("span",e.mergeProps({key:0,ref_for:!0},R.value.span),[e.renderSlot(a.$slots,"ellipsis-text",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(m).ellipsisText||"..."),1)]))],16)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.button.is),e.mergeProps({key:1,ref_for:!0},l.button,{onClick:l.clickHandler}),{default:e.withCtx((()=>[e.renderSlot(a.$slots,l.text.name,{disabled:l.text.disabled,page:l.text.page,index:l.text.index,active:l.text.active,content:l.text.value},(()=>[e.createTextVNode(e.toDisplayString(l.text.value),1)]))])),_:2},1040,["onClick"]))],16)))),128))],42,n))}});exports._sfc_main=d;
//# sourceMappingURL=BPagination.vue_vue_type_script_setup_true_lang-BbonXq31.js.map
