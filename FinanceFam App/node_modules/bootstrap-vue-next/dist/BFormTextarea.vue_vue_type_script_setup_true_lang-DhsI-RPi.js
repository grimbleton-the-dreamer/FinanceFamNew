"use strict";const e=require("vue"),a=require("./useDefaults-Bq2idhQU.js"),o=require("./useFormInput-BPLeApz_.js"),t=require("./useStateClass-BePLKIel.js"),u=require("./dom-D5l3V401.js"),l=require("./index-BqHkgtNq.js"),r=["id","name","form","value","disabled","placeholder","required","autocomplete","readonly","aria-required","aria-invalid","rows","wrap"],n=e.defineComponent({__name:"BFormTextarea",props:e.mergeModels({noResize:{type:Boolean,default:!1},rows:{default:2},wrap:{default:"soft"},noAutoShrink:{type:Boolean,default:!1},maxRows:{default:void 0},ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{default:void 0},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{default:void 0},formatter:{type:Function,default:void 0},id:{default:void 0},lazyFormatter:{type:Boolean,default:!1},list:{default:void 0},name:{default:void 0},placeholder:{default:void 0},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{default:void 0},state:{type:[Boolean,null],default:null},debounce:{default:0},debounceMaxWait:{default:NaN}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(n,{expose:d}){const i=n,s=a.useDefaults(i,"BFormTextarea"),[p,m]=e.useModel(n,"modelValue",{set:e=>o.normalizeInput(e,m)}),f=e.useTemplateRef("_input"),{computedId:v,forceUpdateKey:c,computedAriaInvalid:h,onInput:y,onChange:x,onBlur:b,focus:w,blur:B}=o.useFormInput(s,f,p,m),g=t.useStateClass((()=>s.state)),N=e.computed((()=>[g.value,s.plaintext?"form-control-plaintext":"form-control",{[`form-control-${s.size}`]:!!s.size}])),{computedStyles:q,onInput:S,computedRows:F}=((a,o)=>{const t=e.ref(0),r=e.readonly(e.toRef(o)),n=l.useToNumber((()=>r.value.maxRows||NaN),{method:"parseInt",nanToZero:!0}),d=l.useToNumber((()=>r.value.rows||NaN),{method:"parseInt",nanToZero:!0}),i=e.computed((()=>Math.max(d.value||2,2))),s=e.computed((()=>Math.max(i.value,n.value||0))),p=e.computed((()=>i.value===s.value?i.value:null)),m=async()=>{if(!a.value||!u.isVisible(a.value))return void(t.value=null);const o=getComputedStyle(a.value),l=Number.parseFloat(o.lineHeight)||1,n=(Number.parseFloat(o.borderTopWidth)||0)+(Number.parseFloat(o.borderBottomWidth)||0),d=(Number.parseFloat(o.paddingTop)||0)+(Number.parseFloat(o.paddingBottom)||0),p=n+d,m=l*i.value+p,f=a.value.style.height||o.height;t.value="auto",await e.nextTick();const{scrollHeight:v}=a.value;t.value=f,await e.nextTick();const c=Math.max((v-d)/l,2),h=Math.min(Math.max(c,i.value),s.value),y=Math.max(Math.ceil(h*l+p),m);r.value.noAutoShrink&&(Number.parseFloat(f.toString())||0)>y?t.value=f:t.value=`${y}px`};return e.onMounted(m),{onInput:m,computedStyles:e.computed((()=>({resize:"none",height:"string"==typeof t.value?t.value:t.value?`${t.value}px`:void 0}))),computedRows:p}})(f,e.computed((()=>({maxRows:s.maxRows,rows:s.rows,noAutoShrink:s.noAutoShrink})))),I=e.computed((()=>({resize:s.noResize?"none":void 0,...s.maxRows||s.noAutoShrink?q.value:void 0})));return d({blur:B,element:f,focus:w}),(a,o)=>(e.openBlock(),e.createElementBlock("textarea",{id:e.unref(v),ref:"_input",key:e.unref(c),class:e.normalizeClass(N.value),name:e.unref(s).name||void 0,form:e.unref(s).form||void 0,value:e.unref(p)??void 0,disabled:e.unref(s).disabled,placeholder:e.unref(s).placeholder,required:e.unref(s).required||void 0,autocomplete:e.unref(s).autocomplete||void 0,readonly:e.unref(s).readonly||e.unref(s).plaintext,"aria-required":e.unref(s).required||void 0,"aria-invalid":e.unref(h),rows:e.unref(F)||2,style:e.normalizeStyle(I.value),wrap:e.unref(s).wrap||void 0,onInput:o[0]||(o[0]=a=>{e.unref(y)(a),e.unref(S)()}),onChange:o[1]||(o[1]=(...a)=>e.unref(x)&&e.unref(x)(...a)),onBlur:o[2]||(o[2]=(...a)=>e.unref(b)&&e.unref(b)(...a))},null,46,r))}});exports._sfc_main=n;
//# sourceMappingURL=BFormTextarea.vue_vue_type_script_setup_true_lang-DhsI-RPi.js.map
